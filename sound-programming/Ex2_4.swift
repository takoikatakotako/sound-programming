import Foundation

// ファイルをDFT
func ex2_4(filePath: String) {
    let pcm0 = monoWaveRead(filePath: filePath)

    let N: Int = 64
    var xReal: [Double] = [Double](repeating: 0, count: N)
    var xImag: [Double] = [Double](repeating: 0, count: N)
    var XReal: [Double] = [Double](repeating: 0, count: N)
    var XImag: [Double] = [Double](repeating: 0, count: N)

    var wReal: Double
    var wImag: Double
        
    for n in 0..<N {
        xReal[n] = pcm0.s[n]    // x(n)の実数部
        xImag[n] = 0.0  // x(n)の虚数部
    }
    
    // DFT
    for k in 0..<N {
        for n in 0..<N {
            wReal = cos(2.0 * Double.pi * Double(k) * Double(n) / Double(N) )
            wImag = -sin(2.0 * Double.pi * Double(k) * Double(n) / Double(N) )
            XReal[k] += wReal * xReal[n] - wImag * xImag[n]
            XImag[k] += wReal * xImag[n] + wImag * xReal[n]
        }
    }
    
    for k in 0..<N {
       print("\(k) \(XReal[k]) + \(XImag[k])")
    }
}

//0 0.000000+j0.000000
//1 0.000000+j-0.000000
//2 0.000000+j-7.999953
//3 -0.000000+j0.000000
//4 0.000000+j-0.000000
//5 -0.000000+j-0.000000
//6 -0.000000+j0.000063
//7 -0.000000+j0.000000
//8 0.000000+j0.000000
//9 -0.000000+j0.000000
//10 0.000000+j-0.000090
//11 -0.000000+j0.000000
//12 0.000000+j0.000000
//13 0.000000+j-0.000000
//14 -0.000000+j0.000225
//15 0.000000+j-0.000000
//16 -0.000000+j0.000000
//17 0.000000+j0.000000
//18 -0.000000+j-0.000086
//19 0.000000+j0.000000
//20 0.000000+j0.000000
//21 0.000000+j-0.000000
//22 0.000000+j-0.000117
//23 0.000000+j-0.000000
//24 0.000000+j0.000000
//25 -0.000000+j0.000000
//26 0.000000+j0.000300
//27 -0.000000+j0.000000
//28 0.000000+j0.000000
//29 0.000000+j0.000000
//30 -0.000000+j-0.000000
//31 0.000000+j-0.000000
//32 0.000000+j-0.000000
//33 -0.000000+j-0.000000
//34 -0.000000+j0.000000
//35 -0.000000+j0.000000
//36 0.000000+j0.000000
//37 -0.000000+j0.000000
//38 -0.000000+j-0.000300
//39 0.000000+j-0.000000
//40 0.000000+j0.000000
//41 -0.000000+j0.000000
//42 -0.000000+j0.000117
//43 -0.000000+j0.000000
//44 -0.000000+j-0.000000
//45 0.000000+j-0.000000
//46 0.000000+j0.000086
//47 0.000000+j-0.000000
//48 -0.000000+j0.000000
//49 -0.000000+j-0.000000
//50 0.000000+j-0.000225
//51 0.000000+j-0.000000
//52 -0.000000+j-0.000000
//53 -0.000000+j-0.000000
//54 0.000000+j0.000090
//55 0.000000+j-0.000000
//56 0.000000+j-0.000000
//57 0.000000+j0.000000
//58 0.000000+j-0.000063
//59 0.000000+j0.000000
//60 0.000000+j-0.000000
//61 -0.000000+j-0.000000
//62 -0.000000+j7.999953
//63 0.000000+j-0.000000

